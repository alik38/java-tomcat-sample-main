def tok = UUID.randomUUID().toString()
mail to: 'ali38.karaca@gmail.com', subject: 'Ready to roll?', mimeType: 'text/html',
body: """Please <a href="${env.http://54.224.105.35:8080/}pipeline-inputs/${tok}/proceed">approve me</a>!"""
input message: 'Ready?', token: tok

pipeline {
    agent any
    stages {
        stage('Build Application') {
             steps{
                build job: 'build-web-application'
            }
        }
        stage('Deploy to Staging Environment'){
            steps{
                build job: 'Deploy-Application-Staging-Environment'
            }            
        }
        stage('Deploy to Production Environment'){
            steps{
                timeout(time:5, unit:'DAYS'){
                    input message:'Approve PRODUCTION Deployment?'
                }
                build job: 'Deploy-Application-Production-Environment'
            }
        }
    }
}
